clc;
clear;
%% 1. 输入数据
%%% 1.1. 最终数据
x_0 = 1971:1990;
y_0 = [8.5229; ...
    8.7177; ...
    8.9211; ...
    9.0859; ...
    9.2420; ...
    9.3717; ...
    9.4974; ...
    9.6259; ...
    9.7542; ...
    9.8705; ...
    10.0072; ...
    10.1654; ...
    10.3008; ...
    10.4357; ...
    10.5851; ...
    10.7507; ...
    10.9300; ...
    11.1026; ...
    11.2704; ...
    11.4333; ...
    ];
%%% 1.2. 使用数据
x_1 = 1971:1985;
x_2 = 1972:1985;
y_1 = [8.5229; ...
    8.7177; ...
    8.9211; ...
    9.0859; ...
    9.2420; ...
    9.3717; ...
    9.4974; ...
    9.6259; ...
    9.7542; ...
    9.8705; ...
    10.0072; ...
    10.1654; ...
    10.3008; ...
    10.4357; ...
    10.5851; ...
    ];

%% 2. 建立模型
%%% 2.1 获得增长率变化i
for i = 2:15
    r(i-1) = y_1(i) / y_1(i-1);
end

% % 返回多项式系数
a = polyfit(x_2, r, 1);
% % 返回多项式系数结果
% 2.2 获得增长率变化拟合
zz = polyval(a, x_2);

yk(1) = y_1(1);

% 2.2 计算人口1
for i = 2:14
    yk(i) = yk(i-1) * zz(i-1);
end

% 2.2 计算人口2
x_3 = 1986:1991;
zzp = polyval(a, x_3);


for i = 1:6
    if (i == 1)
        ykk(i) = 10.5851 * zzp(i);
    else
        ykk(i) = ykk(i-1) * zzp(i);
    end
end


plot(x_0, y_0, 'r', x_1, y_1, 'b', x_2, r, 'p', x_2, zz, 'g', x_2, yk, 'g', x_3, ykk, 'b');
fprintf('由增长曲线可以看出,人口并没有按照模型的规律呈现下降,反而呈现直线增长:\n');

for i = 2:20
    r2(i-1) = y_0(i) / y_0(i-1);
end
r2
zz
zzp
fprintf('尤其是1986年后的增长率简直吓人,就是指数增长:\n');

